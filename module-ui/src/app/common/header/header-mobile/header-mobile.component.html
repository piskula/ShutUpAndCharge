<mat-toolbar class="mobile-bar">
  @if (currentUser()) {
    <button mat-icon-button [matMenuTriggerFor]="menu" class="make-menu-btn-height-100">
      <mat-icon>menu</mat-icon>
    </button>
  }
  <mat-menu #menu="matMenu" backdropClass="menu-backdrop" class="menu-panel">
    @if (currentUser(); as headerData) {
      <div>
        @if (headerData.roles.includes('User')) {
          <button mat-button class="navigation-button text-darker"
            routerLinkActive="selected" [routerLink]="['dashboard']">
            <mat-icon class="mr-2">power</mat-icon>
            Charge
          </button>
        }
        @if (headerData.roles.includes('User')) {
          <button mat-button class="navigation-button text-darker"
            routerLinkActive="selected" [routerLink]="['transaction']">
            <mat-icon class="mr-2">trolley</mat-icon>
            Transactions
          </button>
        }
        @if (headerData.roles.includes('Admin')) {
          <button mat-button class="navigation-button text-darker"
            routerLinkActive="selected" [routerLink]="['userManagement']">
            <mat-icon class="mr-2">groups</mat-icon>
            User manager
          </button>
        }
      </div>
      <mat-divider></mat-divider>
      <mat-chip-set class="mr-2" [matTooltip]="headerData.roles.join(', ')">
        <mat-chip>{{ headerData.name }}</mat-chip>
        @for (role of headerData.roles; track role) {
          <mat-chip>{{ role }}</mat-chip>
        }
      </mat-chip-set>
    }
  </mat-menu>
  <mat-icon class="main-logo-icon mr-1">ev_station</mat-icon>
  <span class="mr-2">Shut Up and Charge</span>

  @if (currentUser()) {
    <span style="flex: 1 1 auto"></span>
    <a mat-stroked-button href="/logout" class="logout-icon-link"><mat-icon>logout</mat-icon></a>
  }
</mat-toolbar>
